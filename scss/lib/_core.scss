// =========================================================
// Ember Notes - Core (v1 Skeleton)
// Focus: layout / list hierarchy / basic article readability
// Non-Pro compatible / Hatena-safe styling
// =========================================================

html,
body {
  font-family: $font-family-base;
  color: $text;
  background-color: $background;
  line-height: 1.75;
  -webkit-text-size-adjust: 100%;
  text-rendering: optimizeLegibility;
}

a {
  color: $link;
  text-decoration-thickness: 0.08em;
  text-underline-offset: 0.16em;

  &:hover {
    color: $hover;
  }

  &:visited {
    color: $link-visited;
  }

  &.keyword {
    text-decoration: none;
    border-bottom: 1px dotted $border;
    color: $text;
  }
}

h1, h2, h3, h4, h5, h6 {
  color: $text-header;
  line-height: 1.35;

  a {
    color: $text-header;
    text-decoration: none;

    &:hover {
      color: $hover;
    }
  }
}

/* ---------------------------------------------------------
   Containers (Non-Pro compatible: do not hide global header/footer)
--------------------------------------------------------- */
#container,
#footer {
  padding-left: 12px;
  padding-right: 12px;

  @media #{$mq-sm} {
    width: $container-sm;
    margin: auto;
    padding-left: 0;
    padding-right: 0;
  }

  @media #{$mq-md} {
    width: $container-md;
  }

  @media #{$mq-lg} {
    width: $container-lg;
  }
}

/* 背景をテーマ側で過剰固定しない */
#container,
#content,
#content-inner,
#wrapper,
#box2 {
  background: transparent;
}

/* ---------------------------------------------------------
   Layout (2 columns on PC/Responsive)
   Requirement: content-first ~70%
--------------------------------------------------------- */
#content-inner {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  gap: $sp-8;

  @media #{$mq-sm} {
    flex-direction: row;
    gap: $layout-gap-sm;
    align-items: flex-start;
  }

  @media #{$mq-md} {
    gap: $layout-gap-md;
  }
}

/* Main content area */
#wrapper {
  width: 100%;

  @media #{$mq-sm} {
    width: $main-sm;
    min-width: 0;
  }

  @media #{$mq-md} {
    width: $main-md;
  }

  @media #{$mq-lg} {
    width: $main-lg;
  }
}

/* Sidebar */
#box2 {
  width: 100%;

  @media #{$mq-sm} {
    width: $side-sm;
    min-width: 0;
  }

  @media #{$mq-md} {
    width: $side-md;
  }

  @media #{$mq-lg} {
    width: $side-lg;
  }
}

/* ---------------------------------------------------------
   Header / Blog title
   (Header image is configured in Hatena UI; this styles title area only)
--------------------------------------------------------- */
#blog-title {
  margin: 1.25em 0 1.75em;
  padding-bottom: $sp-4;
  border-bottom: 1px solid $border;
  text-align: left;

  @media #{$mq-sm} {
    margin: 1.5em 0 2em;
  }
}

#title {
  margin: 0;
  font-size: 1.5rem;
  line-height: 1.3;

  @media #{$mq-md} {
    font-size: 1.75rem;
  }

  a {
    color: $text-header;
    text-decoration: none;
  }
}

#blog-description {
  margin: .6em 0 0;
  color: $text-light;
  font-size: .9rem;
  font-weight: normal;
}

/* Header image enabled (Hatena standard DOM) */
.header-image-enable {
  #blog-title {
    margin-top: 0;
    padding-top: $sp-4;
    border-bottom: 1px solid $border;
  }

  #blog-title-inner {
    display: flex;
    align-items: center;
  }

  #blog-title-content {
    margin-left: 12px;
    margin-right: 12px;
  }
}

/* top HTML area */
#top-editarea {
  margin-bottom: 1.25em;
}

/* Breadcrumb */
.breadcrumb {
  font-size: .88rem;
  color: $text-light;
  margin-bottom: $sp-4;

  a {
    color: $text-light;
    text-decoration: none;

    &:hover {
      text-decoration: underline;
    }
  }
}

/* ---------------------------------------------------------
   Entry list (Top / Archive)
   Docs-like list hierarchy (not card-heavy)
--------------------------------------------------------- */
.entry,
.archive-entry {
  position: relative;
  margin-bottom: $sp-10;
  padding-bottom: $sp-8;
  border-bottom: 1px solid $divider;
  background: transparent;
}

.entry:last-child,
.archive-entry:last-child {
  border-bottom: none;
}

/* Entry header */
.entry-header {
  padding-bottom: $sp-4;
  margin-bottom: $sp-5;
  border-bottom: 1px solid $border;
  position: relative;
}

.date {
  margin-bottom: .4em;
  font-size: .85rem;
  line-height: 1.45;

  a {
    color: $text-light;
    text-decoration: none;

    &:hover {
      color: $hover;
      text-decoration: underline;
    }
  }
}

.entry-title {
  margin: 0 0 .25em;
  font-size: 1.45rem;
  line-height: 1.35;
  letter-spacing: .01em;

  @media #{$mq-md} {
    font-size: 1.65rem;
  }

  a {
    color: $text-header;
    text-decoration: none;

    &:hover {
      color: $hover;
      text-decoration: underline;
      text-underline-offset: .14em;
    }
  }
}

.categories {
  margin: .45em 0 0;
  font-size: .85rem;
  color: $text-light;

  a {
    margin-right: .4em;
    color: $text-light;
    text-decoration: none;

    &:hover {
      text-decoration: underline;
    }
  }
}

/* 編集ボタンは位置だけ維持（見た目は作り込みすぎない） */
.entry-header-menu {
  position: absolute;
  top: 0;
  right: 0;
}

/* Archive excerpt */
.archive-entry-body,
.archive-entry .entry-description {
  color: $text-light;
  line-height: 1.7;
}

/* ---------------------------------------------------------
   Article body (v1 basic readability)
   NOTE: detailed components (TOC/table/code etc.) will be v2
--------------------------------------------------------- */
.entry-content {
  color: $text;
  line-height: 1.85;
  font-size: 1rem;

  /* 可読性: カラム幅が広くても本文行長を抑える */
  max-width: 78ch;

  img,
  video {
    max-width: 100%;
    height: auto;
    border-radius: $radius-sm;
  }

  h1, h2, h3, h4, h5, h6 {
    margin: 1.2em 0 .75em;
    line-height: 1.4;
  }

  h1 {
    font-size: 1.45rem;
    @media #{$mq-md} { font-size: 1.6rem; }
  }

  h2 {
    font-size: 1.28rem;
    @media #{$mq-md} { font-size: 1.45rem; }

    padding-bottom: .35em;
    border-bottom: 1px solid $border;
  }

  h3 {
    font-size: 1.12rem;
    @media #{$mq-md} { font-size: 1.22rem; }

    padding-left: .55em;
    border-left: 3px solid $border-strong;
  }

  h4 { font-size: 1.03rem; }
  h5 { font-size: .95rem; }
  h6 { font-size: .9rem; color: $text-light; }

  p {
    margin: 0 0 1.05em;
  }

  ul,
  ol,
  dd {
    margin: 0 0 1em 1.4em;
    padding: 0;

    li {
      margin: .2em 0;
      line-height: 1.75;

      ul, ol {
        margin-bottom: 0;
      }
    }
  }

  blockquote {
    margin: 1em 0 1.2em;
    padding: .9em 1em;
    border: 1px solid $border;
    border-left: 4px solid $color-info;
    background: mix($color-info, $surface, 10%);
    border-radius: 0 $radius-sm $radius-sm 0;

    p:first-of-type { margin-top: 0; }
    p:last-of-type { margin-bottom: 0; }
  }

  pre,
  code {
    font-family: $font-family-monospace;
  }

  pre {
    background: $surface;
    border: 1px solid $border;
    border-radius: $radius-md;
    white-space: pre-wrap;
    text-overflow: ellipsis;
    line-height: 1.45;
    font-size: .88rem;
    padding: 12px;
    overflow-x: auto;

    & > code {
      margin: 0;
      padding: 0;
      white-space: pre;
      border: none;
      background-color: transparent;
      font-family: $font-family-monospace;
    }
  }

  code {
    font-size: 90%;
    margin: 0 2px;
    padding: 1px 5px;
    background-color: $surface-2;
    border: 1px solid $border;
    border-radius: 6px;
  }

  table {
    border-collapse: collapse;
    border-spacing: 0;
    margin-bottom: 1em;
    width: 100%;
    overflow: auto;
    display: block;
    font-size: .85rem;
    line-height: 1.5;

    @media #{$mq-md} {
      font-size: .9rem;
    }
  }

  table th,
  table td {
    border: 1px solid $border;
    padding: 8px 10px;
    vertical-align: top;
  }

  table th {
    background: $surface-2;
    color: $text-header;
    font-weight: 600;
  }

  hr {
    width: 100%;
    border: 0;
    border-top: 1px solid $border;
    margin: 2em 0;
  }

  /* TOC (v1 minimal) */
  .table-of-contents {
    padding: .9em 1em;
    margin: 1em 0 1.25em;
    border: 1px solid $border;
    border-radius: $radius-md;
    background: $surface;

    ul, ol {
      margin-bottom: 0;
    }
  }
}

/* ---------------------------------------------------------
   Entry footer / meta
--------------------------------------------------------- */
.entry-footer {
  .social-buttons {
    margin-bottom: 1em;
  }
}

.entry-footer-section {
  color: $text-light;
  font-size: .9rem;
  line-height: 1.6;

  a {
    color: $text-light;
  }
}

/* ---------------------------------------------------------
   Pager
--------------------------------------------------------- */
.pager {
  margin: 2em 0;
  display: flex;
  justify-content: space-between;
  gap: $sp-4;
}

/* ---------------------------------------------------------
   Sidebar modules (navigation-oriented, low decoration)
--------------------------------------------------------- */
.hatena-module {
  box-sizing: border-box;
  margin-bottom: 2.25em;
  padding-bottom: 1.1em;
  border-bottom: 1px solid $divider;
  font-size: .9rem;
  line-height: 1.6;
}

.hatena-module:last-child {
  border-bottom: none;
}

.hatena-module-title {
  margin-bottom: .7em;
  padding-bottom: .25em;
  border-bottom: 1px solid $border;
  font-size: .95rem;
  font-weight: 700;
  color: $text-header;

  a {
    color: $text-header;
    text-decoration: none;

    &:hover {
      color: $hover;
      text-decoration: underline;
    }
  }
}

/* Sidebar text/link tone */
.hatena-module-body,
.hatena-module-body p,
.hatena-module-body li,
.hatena-module-body span {
  color: $text-light;
}

.hatena-module a {
  color: $text;
}

.hatena-urllist {
  list-style: none;
  margin: 0;
  padding: 0;

  li {
    padding: .45em 0;

    &:last-child {
      padding-bottom: 0;
    }

    a {
      text-decoration: none;

      &:hover {
        text-decoration: underline;
      }
    }
  }

  .urllist-date-link a {
    color: $text-light;
  }

  .urllist-entry-body {
    margin-top: .25em;
    color: $text-light;
    font-size: .88rem;
  }
}

/* Search module (minimal, Hatena-safe) */
.hatena-module-search-box {
  .search-form {
    border: 1px solid $border;
    border-radius: 10px;
    width: 100%;
    box-sizing: border-box;
    display: flex;
    align-items: center;
    background: $surface;
  }

  .search-module-input {
    flex: 1 0;
    padding: 8px 10px;
    color: $text;
    background: none;
    border: none;
    outline: none;
    min-height: 20px;
  }

  .search-module-button {
    width: 28px;
    height: 28px;
    margin-right: 6px;
    background: transparent
      url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3E%3Cdefs%3E%3Cstyle%3E.a%7Bfill:none;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3Esearch%3C/title%3E%3Cpath d='M16.7,15l-3.4-3.3h-.1a5.4,5.4,0,0,0,.9-3.1,5.6,5.6,0,1,0-5.6,5.6,5.4,5.4,0,0,0,3.1-.9.1.1,0,0,0,.1.1L15,16.7a1.1,1.1,0,0,0,.8.3,1.6,1.6,0,0,0,.9-.3,1.4,1.4,0,0,0,0-1.7M8.5,12.3A3.8,3.8,0,0,1,4.8,8.5,3.8,3.8,0,0,1,8.5,4.7a3.9,3.9,0,0,1,3.8,3.8,3.8,3.8,0,0,1-3.8,3.8' fill='%2399a3a8'/%3E%3Crect class='a' width='20' height='20'/%3E%3C/svg%3E")
      no-repeat center;
    background-size: 18px 18px;
    border: none;
    outline: none;
    color: transparent;
    overflow: hidden;
    opacity: .8;
    cursor: pointer;

    &:hover {
      opacity: 1;
    }
  }
}

/* ---------------------------------------------------------
   About / Archive page basics
--------------------------------------------------------- */
.page-about {
  .entry-content {
    dt {
      font-weight: bold;
      border-bottom: 1px solid $border;
      margin-bottom: .5em;
    }

    dd {
      margin-left: 0;
      margin-bottom: 1.6em;
    }
  }
}

.archive-header-category {
  text-align: left;
  color: $text-header;
}

.page-archive {
  .archive-entry {
    margin-bottom: 2.25em;
    margin-left: auto;
    margin-right: auto;
  }
}

/* ---------------------------------------------------------
   Responsive adjustments
--------------------------------------------------------- */
@media #{$mq-xs} {
  #container,
  #footer {
    padding-left: 10px;
    padding-right: 10px;
  }

  #blog-title {
    margin-top: 1em;
    margin-bottom: 1.25em;
  }

  .entry-title {
    font-size: 1.28rem;
  }

  .entry-content {
    font-size: .98rem;
    line-height: 1.8;
  }
}

/* Smartphone / narrow view: stack sidebar under content */
@media (max-width: 767px) {
  #box2 {
    margin-top: $sp-2;
    padding-top: $sp-4;
    border-top: 1px solid $divider;
  }

  .hatena-module {
    margin-bottom: 1.8em;
  }

  .entry-content {
    max-width: none;
  }
}